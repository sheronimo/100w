<ul class="tabs-container">
	<li class="resource-name-tab active" data-view="podcast-view">Podcasts</li>
	<li class="resource-name-tab" data-view="article-view">Articles</li>
	<li class="resource-name-tab" data-view="video-view">Videos</li>
	<li class="resource-name-tab" data-view="publication-view">Publications</li>
</ul>
<!-- Podcast View -->
<div class="insights-view podcast-view">
	<div>
		<div class="podcast-outer">
			<p>
				Our podcasts on climate technology innovation and climate finance can be
				found on:
			</p>
			<div class="podcast-logos podcast-logos-single">
				<a
					href="https://anchor.fm/new-ventures-asia/episodes/"
					target="_blank"
					rel="noopener"
					><img
						loading="lazy"
						src="/wp-content/uploads/2023/02/anchor1.png"
						alt=""
				/></a>
				<a
					href="https://podcasts.apple.com/us/podcast/new-ventures-podcast/id1404553592"
					target="_blank"
					><img
						loading="lazy"
						src="/wp-content/uploads/2023/02/apple.png"
						alt=""
				/></a>
				<a
					href="https://podcasts.google.com/feed/aHR0cHM6Ly9hbmNob3IuZm0vcy81MDM3MTU0L3BvZGNhc3QvcnNz"
					target="_blank"
					rel="noopener"
					><img
						loading="lazy"
						src="/wp-content/uploads/2023/02/google1.png"
						alt=""
				/></a>
				<a
					href="https://open.spotify.com/show/7oEqozHCUxphflg0684xpG"
					target="_blank"
					rel="noopener"
					><img
						loading="lazy"
						src="/wp-content/uploads/2023/02/spotify2.png"
						alt=""
				/></a>
				<a
					href="https://www.youtube.com/channel/UCNzqbQTogcf2_3brx02FodA"
					target="_blank"
					rel="noopener"
					><img
						loading="lazy"
						src="/wp-content/uploads/2023/02/youtube1.png"
						alt=""
				/></a>
				<!--<a href="https://medium.com/new-ventures-asia" target="_blank"
					><img src="/wp-content/uploads/2023/02/medium1.png" alt=""
				/></a>-->
			</div>
		</div>
		<p class="blurb">
			Through these podcasts, we amplify the work of climate innovators and
			raise awareness for the industry, especially to provide information and
			support to new initiatives. We explore various topics including
			Adaptation, Buildings, Energy, Finance, and Food.
		</p>
	</div>
	<div class="dropdown">
		<button class="dropdown-toggle">Categories</button>
		<ul class="cat-tabs-container">
			<li class="cat-tab active all">View All</li>
			[pods name="podcast_category" limit="999"]
			<li class="cat-tab">{@name}</li>
			[/pods]
		</ul>
	</div>
	<div class="podcast-grid main-insights-grid">
		[pods name="podcast" limit="999" orderby="release_date DESC"]
		<div
			class="insight-card podcast-card js-card"
			data-cat="{@podcast_category.name}">
			<a href="{@permalink}" target="_blank" rel="noopener">
				<img
					src="{@post_thumbnail_url.medium_large}"
					class="fit-square"
					alt=""
					loading="lazy" />
				<p class="project-meta">
					<span>{@podcast_category.name}</span>
				</p>
				<p class="project-title">{@post_title}</p>
			</a>
		</div>
		[/pods]
	</div>
</div>

<!-- Article View -->
<div class="insights-view article-view">
	<p>
		Our articles discuss the impact of climate innovation, analyse lessons of
		climate innovation, and examine climate change related topics.
	</p>
	<div class="dropdown">
		<button class="dropdown-toggle">Categories</button>
		<ul class="cat-tabs-container">
			<li class="cat-tab active all">View All</li>
			[pods name="article_category" limit="999"]
			<li class="cat-tab">{@name}</li>
			[/pods]
		</ul>
	</div>
	<div class="article-grid main-insights-grid">
		[pods name="article" limit="999" orderby="post_date DESC"]
		<div
			class="insight-card article-card js-card"
			data-cat="{@article_category.name}">
			<a href="{@permalink}" target="_blank" rel="noopener">
				<img
					src="{@post_thumbnail_url.medium_large}"
					class="fit-cover"
					alt=""
					loading="lazy" />
				<p class="project-meta">
					<span>{@article_category.name}</span>
				</p>
				<p class="project-title">{@post_title}</p>
			</a>
		</div>
		[/pods]
	</div>
</div>

<!-- Video View -->
<div class="insights-view video-view">
	<p>
		We have done a series of videos explaining the technology and business
		models for rural renewable energy.
	</p>
	<div class="video-grid main-insights-grid">
		[pods name="video" limit="999" orderby="post_date DESC"]
		<div class="insight-card video-card js-card">
			<a href="{@permalink}" target="_blank" rel="noopener">
				<iframe
					data-url="{@youtube_video_url}"
					class="js-change-embed"></iframe>
				<p class="project-title">{@post_title}</p>
			</a>
		</div>
		[/pods]
	</div>
</div>

<!-- Publication View -->
<div class="insights-view publication-view">
	<p>
		We have also written three Peer-Reviewed Papers with WRI and also Published
		on the SWITCH Asia Network Facility on Enabling SME Access to Finance for
		Sustainable Consumption and Production in Asia.
	</p>
	<div class="publication-grid main-insights-grid">
		[pods name="publication" limit="999" orderby="post_date DESC"]
		<div
			class="insight-card publication-card js-card"
			data-cat="{@publication_category.name}">
			<a href="{@permalink}" target="_blank" rel="noopener">
				<hr />
				<p class="project-title">{@post_title}</p>
			</a>
		</div>
		[/pods]
	</div>
</div>

<button id="btn-load">Load More</button>
<script>
	$(document).ready(function () {
		showBlock()
		showCard('.active-view .js-card')

		$('.resource-name-tab').click(function () {
			$('.resource-name-tab').removeClass('active')
			$('.insights-view').removeClass('active-view')
			$(this).addClass('active')
			showBlock()
			showCard('.active-view .js-card')
		})

		$('.dropdown .dropdown-toggle').click(function () {
			$(this).parent().toggleClass('open')
		})

		$('.cat-tab').click(function () {
			$(this).closest('.dropdown').removeClass('open')
			$('.active-view .cat-tab').removeClass('active')
			$('.active-view .js-card').addClass('hidden')
			$(this).addClass('active')
			if ($(this).hasClass('all')) {
				showCard('.active-view .js-card')
			} else {
				showCard('.active-view .js-card[data-cat="' + $(this).text() + '"]')
			}
		})

		$('#btn-load').on('click', function () {
			let withCatHidden =
				'.active-view .js-card[data-cat="' +
				$('.active-view .cat-tab.active').text() +
				'"].hidden'
			let withoutCatHidden = '.active-view .js-card.hidden'

			if ($('.active-view').hasClass('video-view')) {
				$(withoutCatHidden).slice(0, 12).removeClass('hidden')

				hideBtn($(withoutCatHidden))
			} else {
				if (!$('.active-view .cat-tab.active').hasClass('all')) {
					$(withCatHidden).slice(0, 12).removeClass('hidden')

					hideBtn($(withCatHidden))
				} else {
					$(withoutCatHidden).slice(0, 12).removeClass('hidden')

					hideBtn($(withoutCatHidden))
				}
			}
		})
	})

	function hideBtn(elem) {
		if (elem.length == 0) {
			$('#btn-load').hide()
		} else {
			$('#btn-load').show()
		}
	}

	function showBlock() {
		// Get active top tab
		let activeTab = document.querySelector('.resource-name-tab.active')
		// Get corresponding data-variable of active top tab
		let getView = activeTab.dataset.view
		// Activate the view that matches the active tab's data variable
		let activeViewStr = `.insights-view.${getView}`
		$(activeViewStr).addClass('active-view')

		$('.active-view .js-card').addClass('hidden')
	}

	function showCard(elem) {
		$(elem).slice(0, 12).removeClass('hidden')

		if ($(`${elem}.hidden`).length == 0) {
			$('#btn-load').hide()
		} else {
			$('#btn-load').show()
		}
	}
</script>
